<header class="sheet-header facanha-dialog-header">
    <img class="profile-img" src="icons/sundries/gaming/dice-pair-white-green.webp"
        title="{{localize 'ABEA.Facanha.Dialog.Title'}}" height="64" width="64"
        style="border: none; background: transparent;" />
    <div class="header-details-panel">
        <h1 class="dialog-title"
            style="font-family: var(--font-heading); font-size: 1.5rem; color: var(--abea-primary); margin: 0; border: none;">
            {{localize "ABEA.Facanha.Dialog.Title"}}</h1>
    </div>
</header>

<section class="sheet-body" style="padding-top: 5px; gap: 5px;">
    <!-- Category Selection (Tabs) -->
    <div class="form-group category-selection facanha-dialog-mt-normalizer">
        <label>{{localize "ABEA.Facanha.Dialog.Category"}}</label>
        <div class="category-tabs">
            {{#each categories as |label key|}}
            <button type="button" class="category-btn {{#if (eq key 'custom')}}active{{/if}}" data-category="{{key}}">
                <div class="category-icon">
                    {{#if (eq key 'custom')}}
                    <i class="fas fa-edit"></i>
                    {{else}}
                    <!-- Placeholder for category images, using generic icon for now -->
                    <i class="fas fa-scroll"></i>
                    {{/if}}
                </div>
                <span class="category-label">{{label}}</span>
            </button>
            {{/each}}
        </div>
        <input type="hidden" name="facanha-categoria" value="custom">
    </div>

    <!-- Feat Selection (Buttons) -->
    <div class="form-group feat-selection-wrapper facanha-dialog-mt-normalizer" id="facanha-select-group"
        style="display: none;">
        <label>{{localize "ABEA.Facanha.Dialog.SelectFeat"}}</label>
        <div class="feat-list-container" id="feat-list-container">
            <!-- Populated by JS -->
        </div>
        <input type="hidden" name="facanha-selecionada">
    </div>

    <!-- Custom Feat Input -->
    <div class="form-group custom-feat-wrapper facanha-dialog-mt-normalizer" id="facanha-custom-group">
        <label>{{localize "ABEA.Item.Name"}}</label>
        <div class="form-fields">
            <input class="custom-feat-input" type="text" name="facanha-nome" placeholder="Ex: Saltar..."
                list="skill-list">
            <datalist id="skill-list">
                {{#each skillList}}
                <option value="{{this}}"></option>
                {{/each}}
            </datalist>
        </div>
    </div>

    <div class="bottom-panel">
        <!-- Row 2: Players -->
        <div class="form-group facanha-dialog-mt-normalizer" style="margin-bottom: 5px;">
            <label>
                Selecione os Jogadores
                <a class="select-all-players" title="Selecionar Todos"><i class="fas fa-users"></i></a>
            </label>
            <div class="form-fields">
                <select name="jogadores" multiple style="height: 120px;">
                    {{selectOptions players valueAttr="id" labelAttr="name"}}
                </select>
            </div>
            <p class="notes" style="margin: 2px 0 0 0;">Segure Ctrl para selecionar v√°rios.</p>
        </div>

        <!-- Row 3: Difficulty -->
        <div class="form-group facanha-dialog-mt-normalizer dificult-panel" style="margin-bottom: 5px;">
            <label>{{localize "ABEA.Facanha.Card.Difficulty"}}</label>
            <div class="form-fields">
                <select name="dificuldade">
                    {{selectOptions difficulties selected=15}}
                </select>
            </div>
        </div>
    </div>
</section>
</form>